// Translations for the app
export const translations = {
  en: {
    // App name
    appName: "Ques",
    
    // Navigation
    home: "Home",
    search: "Search",
    messages: "Messages",
    profile: "Profile",
    
    // Filter sidebar
    filters: "Filters",
    filterDescription: "Customize your search to find the perfect project collaborators",
    cardTypes: "Card Types",
    projects: "Projects",
    profiles: "Profiles",
    projectStatus: "Project Status",
    projectTypes: "Project Types",
    distance: "Distance (km)",
    ageRange: "Age Range",
    ongoing: "Ongoing",
    finished: "Finished",
    filterTitle: "Filters",
    addFiltersHint: "Add filters to find your perfect collaborator",
    maxDistance: "Max Distance",
    sameCity: "In the same city as me",
    showOutOfDistance: "Show out-of-distance cards when nearby are finished",
    age: "Age",
    notStarted: "Not Started",
    applyFilters: "Apply Filters",
    reset: "Reset",
    searchTypePlaceholder: "Search types...",
    noMoreProjectsTitle: "No more projects!",
    noMoreProjectsSubtitle: "Check back later for new opportunities.",
    noHistoryTitle: "No history yet!",
    noHistorySubtitle: "Swipe left on some projects to see them here.",
    noFavoritesTitle: "No favorites yet!",
    noFavoritesSubtitle: "Right-swipe or like to add favorites.",
    // AI Search
    searchModeSettingsTitle: "Search Mode Settings",
    searchModeSettingsSubtitle: "Choose your search mode to customize how Ques finds results.",
    searchModeTitle: "Search Mode",
    searchModeDesc: "Search projects within the platform",
    agentModeTitle: "Agent Mode",
    agentModeDesc: "Use LLM to search the web for relevant ideas",
    applySettings: "Apply Settings",
    youSearchedFor: "You searched for:",
    aiSearchedIdeasFor: "AI searched ideas for:",
    noResults: "No results found. Try a different search term.",
    aiProjectSearchTitle: "AI Project Search",
    aiProjectSearchBasic: "Describe what kind of project or collaborator you're looking for, and our AI will find the perfect matches.",
    aiProjectSearchAgent: "Describe your project idea and our AI will generate innovative project concepts and suggestions.",
    searchBarPlaceholderBasic: "Ask AI to find projects or collaborators...",
    searchBarPlaceholderAgent: "Describe your project idea for AI suggestions...",
    // Chat
    newMatches: "New Matches",
    noNewMatches: "No new matches",
    keepSwipingForMatches: "Keep swiping to discover more matches!",
    delete: "Delete",
    pin: "Pin",
    unpin: "Unpin",
    archive: "Archive",
    unarchive: "Unarchive",
    noChatsInCategory: "No conversations in this category",
    allChats: "All Chats",
    unread: "Unread",
    archived: "Archived",
    chats: "Chats",
    newMatch: "New match",
    online: "Online",
    hours: "h",
    ago: " ago",
    // Profile
    editProfile: "Edit Profile",
    basicInfo: "Basic Information",
    name: "Name",
    enterName: "Enter your name",
    enterAge: "Enter your age",
    location: "Location",
    enterLocation: "Enter your location",
    introduceYourself: "Introduce yourself...",
    yourGoals: "What are your goals?",
    describeYourGoals: "Describe your goals...",
    whatAreYouLookingFor: "What are you looking for?",
    describeWhatYouAreLookingFor: "Describe what you are looking for...",
    typeTags: "Type Tags",
    typeTagsHint: "These tags appear at the top to describe your identity.",
    skillTags: "Skill Tags",
    addNewSkill: "Add New Skill",
    enterNewSkill: "Enter a new skill",
    add: "Add",
    existingSkills: "Existing Skills",
    initiatedProjects: "Initiated Projects",
    collaboratedProjects: "Collaborated Projects",
    archivedProjects: "Archived Projects",
    chooseAction: "Choose an action",
    editProject: "Edit Project",
    archiveProject: "Archive Project",
    unarchiveProject: "Unarchive Project",
    deleteProject: "Delete Project",
    confirmDelete: "Confirm Delete",
    project: "Project",
    cannotUndo: "This action cannot be undone!",
    
    // Project details
    projectOwner: "Project Owner",
    about: "About",
    collaborators: "Collaborators",
    description: "Description",
    purpose: "Purpose",
    lookingFor: "Looking For",
    links: "Links",
    media: "Media",
    projectDetails: "Project Details",
    profileDetails: "Profile Details",
    whatWeAreBuilding: "What We're Building",
    goals: "Goals",
    
    // Common text
    by: "By",
    collaboratorsText: "collaborators",
    kmAway: "km away",
    complete: "complete",
    years: "years",
    
    // Actions
    close: "Close",
    back: "Back",
    next: "Next",
    save: "Save",
    cancel: "Cancel",
    
    // Status
    status: "Status",
    progress: "Progress",
    startTime: "Start Time",
    
    // Card content
    cardBy: "By",
    cardCollaborators: "collaborators",
  },
  
  zh: {
    // App name
    appName: "快索",
    
    // Navigation
    home: "首页",
    search: "搜索",
    messages: "消息",
    profile: "个人资料",
    
    // Filter sidebar
    filters: "筛选",
    filterDescription: "自定义搜索以找到完美的项目合作伙伴",
    cardTypes: "卡片类型",
    projects: "项目",
    profiles: "个人资料",
    projectStatus: "项目状态",
    projectTypes: "项目类型",
    distance: "距离 (公里)",
    ageRange: "年龄范围",
    ongoing: "进行中",
    finished: "已完成",
    filterTitle: "筛选器",
    addFiltersHint: "添加筛选条件以找到完美的合作伙伴",
    maxDistance: "最大距离",
    sameCity: "与我在同一个城市",
    showOutOfDistance: "当我可看的卡片浏览完后向我显示超出距离的卡片",
    age: "年龄",
    notStarted: "未开始",
    applyFilters: "应用筛选",
    reset: "重置",
    searchTypePlaceholder: "搜索类型...",
    noMoreProjectsTitle: "没有更多项目了！",
    noMoreProjectsSubtitle: "稍后再来看看新的合作机会。",
    noHistoryTitle: "暂无历史记录！",
    noHistorySubtitle: "左滑一些项目即可在这里查看。",
    noFavoritesTitle: "暂无收藏！",
    noFavoritesSubtitle: "右滑或点赞项目后会出现在这里。",
    // AI Search
    searchModeSettingsTitle: "搜索模式设置",
    searchModeSettingsSubtitle: "选择搜索模式以自定义Ques的查找方式。",
    searchModeTitle: "站内搜索",
    searchModeDesc: "搜索平台内的项目",
    agentModeTitle: "Agent 模式",
    agentModeDesc: "使用 LLM 搜索网络获取相关想法",
    applySettings: "应用设置",
    youSearchedFor: "你的搜索：",
    aiSearchedIdeasFor: "AI 为你搜索的想法：",
    noResults: "未找到结果。请尝试其他关键词。",
    aiProjectSearchTitle: "AI 项目搜索",
    aiProjectSearchBasic: "描述你想要的项目或合作者类型，我们的 AI 会为你找到合适的匹配。",
    aiProjectSearchAgent: "描述你的项目想法，AI 会生成创新的项目构想与建议。",
    searchBarPlaceholderBasic: "让 AI 帮你找项目或合作者...",
    searchBarPlaceholderAgent: "描述你的项目想法以获取 AI 建议...",
    // Chat
    newMatches: "新匹配",
    noNewMatches: "暂无新的匹配",
    keepSwipingForMatches: "继续滑动以发现更多匹配！",
    delete: "删除",
    pin: "置顶",
    unpin: "取消置顶",
    archive: "归档",
    unarchive: "取消归档",
    noChatsInCategory: "暂无此分类的会话",
    allChats: "全部聊天",
    unread: "未读",
    archived: "已归档",
    chats: "聊天",
    newMatch: "新匹配",
    online: "在线",
    hours: "小时",
    ago: "前在线",
    // Profile
    editProfile: "编辑资料",
    basicInfo: "基本信息",
    name: "姓名",
    enterName: "请输入姓名",
    enterAge: "请输入年龄",
    location: "位置",
    enterLocation: "请输入位置",
    introduceYourself: "请介绍你自己...",
    yourGoals: "你的目标是什么？",
    describeYourGoals: "请描述你的目标...",
    whatAreYouLookingFor: "你在寻找什么？",
    describeWhatYouAreLookingFor: "请描述你在寻找什么...",
    typeTags: "类型标签",
    typeTagsHint: "这些标签将显示在个人主页第一排，用于说明你的身份类型。",
    skillTags: "技能标签",
    addNewSkill: "添加新技能",
    enterNewSkill: "输入新技能",
    add: "添加",
    existingSkills: "现有技能",
    initiatedProjects: "发起的项目",
    collaboratedProjects: "合作的项目",
    archivedProjects: "已存档的项目",
    chooseAction: "选择要执行的操作",
    editProject: "编辑项目",
    archiveProject: "存档项目",
    unarchiveProject: "取消存档",
    deleteProject: "删除项目",
    confirmDelete: "确认删除",
    project: "项目",
    cannotUndo: "删除后无法恢复！",
    
    // Project details
    projectOwner: "项目负责人",
    about: "关于",
    collaborators: "合作者",
    description: "描述",
    purpose: "目的",
    lookingFor: "正在寻找",
    links: "链接",
    media: "媒体",
    projectDetails: "项目详情",
    profileDetails: "个人资料详情",
    whatWeAreBuilding: "我们正在做的",
    goals: "目标",
    
    // Common text
    by: "发起人",
    collaboratorsText: "合作者",
    kmAway: "公里外",
    complete: "完成",
    years: "岁",
    
    // Actions
    close: "关闭",
    back: "返回",
    next: "下一步",
    save: "保存",
    cancel: "取消",
    
    // Status
    status: "状态",
    progress: "进度",
    startTime: "开始时间",
    
    // Card content
    cardBy: "发起人",
    cardCollaborators: "合作者",
  }
};

// Helper function to get translation
export const getTranslation = (key: string, language: 'en' | 'zh' = 'zh') => {
  const keys = key.split('.');
  let value: any = translations[language];
  
  for (const k of keys) {
    value = value?.[k];
    if (value === undefined) {
      console.warn(`Translation key "${key}" not found for language "${language}"`);
      return key; // Return the key as fallback
    }
  }
  
  return value;
};

// Current language (default to Chinese)
export let currentLanguage: 'en' | 'zh' = 'zh';

// Simple pub/sub to notify app of language changes
type LanguageListener = (lang: 'en' | 'zh') => void;
const languageListeners: Set<LanguageListener> = new Set();

export const subscribeLanguageChange = (listener: LanguageListener) => {
  languageListeners.add(listener);
  return () => languageListeners.delete(listener);
};

export const getLanguage = (): 'en' | 'zh' => currentLanguage;

// Function to set language
export const setLanguage = (language: 'en' | 'zh') => {
  currentLanguage = language;
  // Update HTML lang attribute
  document.documentElement.lang = language === 'zh' ? 'zh-CN' : 'en';
  // Notify subscribers so React can re-render
  languageListeners.forEach((l) => {
    try { l(language); } catch {}
  });
};

// Function to get current translation
export const t = (key: string) => getTranslation(key, currentLanguage); 